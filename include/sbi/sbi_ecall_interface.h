/*
 * SPDX-License-Identifier: BSD-2-Clause
 *
 * Copyright (c) 2019 Western Digital Corporation or its affiliates.
 *
 * Authors:
 *   Anup Patel <anup.patel@wdc.com>
 */

#ifndef __SBI_ECALL_INTERFACE_H__
#define __SBI_ECALL_INTERFACE_H__

/* clang-format off */

/* SBI Extension IDs */
#define SBI_EXT_0_1_SET_TIMER			0x0
#define SBI_EXT_0_1_CONSOLE_PUTCHAR		0x1
#define SBI_EXT_0_1_CONSOLE_GETCHAR		0x2
#define SBI_EXT_0_1_CLEAR_IPI			0x3
#define SBI_EXT_0_1_SEND_IPI			0x4
#define SBI_EXT_0_1_REMOTE_FENCE_I		0x5
#define SBI_EXT_0_1_REMOTE_SFENCE_VMA		0x6
#define SBI_EXT_0_1_REMOTE_SFENCE_VMA_ASID	0x7
#define SBI_EXT_0_1_SHUTDOWN			0x8
#define SBI_EXT_BASE				0x10
#define SBI_EXT_TIME				0x54494D45
#define SBI_EXT_IPI				0x735049
#define SBI_EXT_RFENCE				0x52464E43
#define SBI_EXT_HSM				0x48534D
#define SBI_EXT_PSCI				0x4C4547

/* SBI function IDs for BASE extension*/
#define SBI_EXT_BASE_GET_SPEC_VERSION		0x0
#define SBI_EXT_BASE_GET_IMP_ID			0x1
#define SBI_EXT_BASE_GET_IMP_VERSION		0x2
#define SBI_EXT_BASE_PROBE_EXT			0x3
#define SBI_EXT_BASE_GET_MVENDORID		0x4
#define SBI_EXT_BASE_GET_MARCHID		0x5
#define SBI_EXT_BASE_GET_MIMPID			0x6

/* SBI function IDs for TIME extension*/
#define SBI_EXT_TIME_SET_TIMER			0x0

/* SBI function IDs for IPI extension*/
#define SBI_EXT_IPI_SEND_IPI			0x0

/* SBI function IDs for RFENCE extension*/
#define SBI_EXT_RFENCE_REMOTE_FENCE_I		0x0
#define SBI_EXT_RFENCE_REMOTE_SFENCE_VMA	0x1
#define SBI_EXT_RFENCE_REMOTE_SFENCE_VMA_ASID	0x2
#define SBI_EXT_RFENCE_REMOTE_HFENCE_GVMA	0x3
#define SBI_EXT_RFENCE_REMOTE_HFENCE_GVMA_VMID	0x4
#define SBI_EXT_RFENCE_REMOTE_HFENCE_VVMA	0x5
#define SBI_EXT_RFENCE_REMOTE_HFENCE_VVMA_ASID	0x6

/* SBI function IDs for HSM extension */
#define SBI_EXT_HSM_HART_START			0x0
#define SBI_EXT_HSM_HART_STOP			0x1
#define SBI_EXT_HSM_HART_GET_STATUS		0x2

#define SBI_HSM_HART_STATUS_STARTED		0x0
#define SBI_HSM_HART_STATUS_STOPPED		0x1
#define SBI_HSM_HART_STATUS_START_PENDING	0x2
#define SBI_HSM_HART_STATUS_STOP_PENDING	0x3

/* SBI function IDs for PSCI extension.  From section 5.1 of ARM DEN 0022D */
#define SBI_EXT_PSCI_PSCI_VERSION		0x84000000
#define SBI_EXT_PSCI_CPU_SUSPEND		0x84000001
#define SBI_EXT_PSCI64_CPU_SUSPEND		0xC4000001
#define SBI_EXT_PSCI_CPU_OFF			0x84000002
#define SBI_EXT_PSCI_CPU_ON			0x84000003
#define SBI_EXT_PSCI64_CPU_ON			0xC4000003
#define SBI_EXT_PSCI_AFFINITY_INFO		0x84000004
#define SBI_EXT_PSCI64_AFFINITY_INFO		0xC4000004
#define SBI_EXT_PSCI_MIGRATE			0x84000005
#define SBI_EXT_PSCI64_MIGRATE			0xC4000005
#define SBI_EXT_PSCI_MIGRATE_INFO_TYPE		0x84000006
#define SBI_EXT_PSCI_MIGRATE_INFO_UP_CPU	0x84000007
#define SBI_EXT_PSCI64_MIGRATE_INFO_UP_CPU	0xC4000007
#define SBI_EXT_PSCI_SYSTEM_OFF			0x84000008
#define SBI_EXT_PSCI_SYSTEM_RESET		0x84000009
#define SBI_EXT_PSCI_PSCI_FEATURES		0x8400000A
#define SBI_EXT_PSCI_CPU_FREEZE			0x8400000B
#define SBI_EXT_PSCI_CPU_DEFAULT_SUSPEND	0x8400000C
#define SBI_EXT_PSCI64_CPU_DEFAULT_SUSPEND	0xC400000C
#define SBI_EXT_PSCI_NODE_HW_STATE		0x8400000D
#define SBI_EXT_PSCI64_NODE_HW_STATE		0xC400000D
#define SBI_EXT_PSCI_SYSTEM_SUSPEND		0x8400000E
#define SBI_EXT_PSCI64_SYSTEM_SUSPEND		0xC400000E
#define SBI_EXT_PSCI_SET_SUSPEND_MODE		0x8400000F
#define SBI_EXT_PSCI_STAT_RESIDENCY		0x84000010
#define SBI_EXT_PSCI64_STAT_RESIDENCY		0xC4000010
#define SBI_EXT_PSCI_STAT_COUNT			0x84000011
#define SBI_EXT_PSCI64_STAT_COUNT		0xC4000011
#define SBI_EXT_PSCI_SYSTEM_RESET2		0x84000012
#define SBI_EXT_PSCI64_SYSTEM_RESET2		0xC4000012
#define SBI_EXT_PSCI_MEM_PROTECT		0x84000013
#define SBI_EXT_PSCI_MEM_PROTECT_CHECK_RANGE	0x84000014

/* */

#define SBI_SPEC_VERSION_MAJOR_OFFSET		24
#define SBI_SPEC_VERSION_MAJOR_MASK		0x7f
#define SBI_SPEC_VERSION_MINOR_MASK		0xffffff
#define SBI_EXT_VENDOR_START			0x09000000
#define SBI_EXT_VENDOR_END			0x09FFFFFF
#define SBI_EXT_FIRMWARE_START			0x0A000000
#define SBI_EXT_FIRMWARE_END			0x0AFFFFFF

/* SBI return error codes */
#define SBI_SUCCESS				0
#define SBI_ERR_FAILED				-1
#define SBI_ERR_NOT_SUPPORTED			-2
#define SBI_ERR_INVALID_PARAM			-3
#define SBI_ERR_DENIED				-4
#define SBI_ERR_INVALID_ADDRESS			-5
#define SBI_ERR_ALREADY_AVAILABLE		-6

#define SBI_LAST_ERR				SBI_ERR_ALREADY_AVAILABLE

/* clang-format on */

#endif
